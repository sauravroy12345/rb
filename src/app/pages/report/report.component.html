<section class="report">
    <div class="report-page">
        <div class="section-title">
            <h2>Report</h2>
            <div class="divider mx-auto my-3"></div>
        </div>
    </div>
    <div class="col-md-11 report-box">
        <div class="report-generate">
            <form [formGroup]="reportForm" (ngSubmit)="reportShow()">
                <div class="row">
                    <div class="col-md-1"></div>
                    <div class="col-md-1">
                        <label for="" class="bill-id">Bill Id </label>
                    </div>
                    <div class="col-md-1 form-group">
                        <div class="material ">
                            <input type="text" required maxlength="2" formControlName="first" #char_input
                                (keyup)="keyup1(char_input.value)"
                                (input)="char_input.value = char_input.value.toUpperCase()">
                            <span class="borda"></span>
                            <label>Char</label>
                        </div>
                        <div *ngIf="getControl.first.touched && getControl.first.invalid" class="validation">
                            <div *ngIf="getControl.first.errors.required">Required.</div>
                            <!-- <div *ngIf="getControl.first.errors.pattern">Invalid.</div> -->
                        </div>
                    </div>
                    <div class="col-md-1 form-group">
                        <div class="material">
                            <input #dig_1_input type="text" required maxlength="2" formControlName="secondDigit"
                                (keyup)="keyup2(dig_1_input.value)">
                            <span class="borda"></span>
                            <label>Digit</label>
                        </div>
                        <div *ngIf="getControl.secondDigit.touched && getControl.secondDigit.invalid"
                            class="validation">
                            <div *ngIf="getControl.secondDigit.errors.required">Required.</div>
                            <div *ngIf="getControl.secondDigit.errors.pattern">Invalid.</div>
                        </div>
                    </div>
                    <div class="col-md-1 form-group">
                        <div class="material">
                            <input #dig_2_input type="text" required maxlength="4" formControlName="thirdDigit" (keyup)="keyup3(dig_2_input.value)">
                            <span class="borda"></span>
                            <label>Digit</label>
                        </div>
                        <div *ngIf="getControl.thirdDigit.touched && getControl.thirdDigit.invalid" class="validation">
                            <div *ngIf="getControl.thirdDigit.errors.required">Required.</div>
                            <div *ngIf="getControl.thirdDigit.errors.pattern">Invalid.</div>
                        </div>
                    </div>
                    <div class="col-md-2">
                        <div class="material">
                            <input #dig_3_input type="text" required formControlName="sur_name">
                            <span class="borda"></span>
                            <label>Enter Surname</label>
                        </div>
                        <div *ngIf="getControl.sur_name.touched && getControl.sur_name.invalid" class="validation">
                            <div *ngIf="getControl.sur_name.errors.required">Required.</div>
                        </div>
                    </div>
                    <div class="col-md-2">
                        <div class="select">
                            <select class="select-text" formControlName="FYear">
                                <option value="">Financial Year</option>
                                <option *ngFor="let item of finacialYear; let i = index" value="{{item.FYear}}"
                                    [selected]="i == 0"> {{item.FYear}} </option>
                            </select>
                            <label class="select-label">Select Year</label>
                        </div>
                    </div>
                    <div class="col-md-2 form-group">
                        <button mat-raised-button class="search" [disabled]="reportForm.invalid">Search</button>
                    </div>
                    <div class="col-md-1"></div>
                </div>
            </form>
        </div>
        <div class="row mb">
            <div class="col-md-12">
                <div *ngIf="dataReport.length !== 0">
                    <div class="patient-report-box">
                        <p class="heading">{{dataReport[0]?.PatientName}}</p>
                        <p class="patient-email">{{dataReport[0]?.Email}}</p>
                        <div class="row">
                            <div class="col-md-12">
                                <div class="row">
                                    <div class="col-md-3">
                                        <div class="row">
                                            <div class="col-md-3">
                                                <label class="label">Bill Id</label>
                                            </div>
                                            <div class="col-md-1">
                                                <label class="colon">:</label>
                                            </div>
                                            <div class="col-md-7">
                                                <label class="desc">{{dataReport[0]?.BillID}}</label>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="row">
                                            <div class="col-md-4">
                                                <label class="label">Bill Date</label>
                                            </div>
                                            <div class="col-md-1">
                                                <label class="colon">:</label>
                                            </div>
                                            <div class="col-md-6">
                                                <label class="desc">{{dataReport[0]?.BillDate}}</label>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="row">
                                            <div class="col-md-6">
                                                <label class="label">Net Amt(Rs.)</label>
                                            </div>
                                            <div class="col-md-1">
                                                <label class="colon">:</label>
                                            </div>
                                            <div class="col-md-4">
                                                <label class="desc">{{dataReport[0]?.NetAmt}}</label>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="row" *ngIf="dataReport[0].DueAmt !== '0.00'">
                                            <div class="col-md-6">
                                                <label class="label"> Due Amt(Rs.)</label>
                                            </div>
                                            <div class="col-md-1">
                                                <label class="colon">:</label>
                                            </div>
                                            <div class="col-md-4">
                                                <label class="desc">{{dataReport[0].DueAmt}}</label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>


                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- <div class="row">
                <div class="col-md-2 mb" *ngFor="let item of dataReport">
                    <div class="patient-report-box">
                       <div class="row">
                            <div class="col-md-12">
                                <label class="overflow-tip test"><span>{{item.TestName}}</span></label>
                               </div>
                         </div>
                        <div class="row">
                            <div class="col-md-4">
                                <label class="label">Status:</label>
                            </div>
                            <div class="col-md-8">
                                <label class="desc">{{item.ReportStatus}} </label>
                        </div>
                        </div>
                       
                        <div class="row">
                                <div class="col-md-12 mt-2" style="text-align: center;" *ngIf="item.ReportStatus === 'Completed' && item.DueAmt === '0.00'">
                                    <a [href]="item.report_image_url" target="_blank"> <button mat-raised-button class="view">View Report</button></a>
                                 </div>
                                 <div class="col-md-12 mt-2" style="text-align: center;" *ngIf="item.ReportStatus === 'Pending'">
                                      <button mat-raised-button class="view1" disabled>View Report</button>
                                  </div>
                            </div>
                        
                    </div>
                </div>
            </div> -->
        <table class="table table-striped tabl" *ngIf="dataReport.length !== 0">
            <thead>
                <tr>
                    <th class="col-sm-3">Test Name</th>
                    <th class="col-sm-2">Status</th>
                    <th class="col-sm-1">Image</th>
                    <th class="col-sm-1">Report</th>
                    <th class="col-sm-4">Report Image</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let item of dataReport">
                    <td> {{item.TestName}} </td>
                    <td> {{item.ReportStatus}} </td>
                    <td></td>
                    <td> <a [href]="item.report_image_url" target="_blank"
                            *ngIf="item.ReportStatus === 'Completed' && (item.DueAmt === 0 || item.DueAmt < 0)">
                            <mat-icon matTooltip="View Report">picture_as_pdf</mat-icon>
                        </a> <span *ngIf="item.ReportStatus === 'Pending' || item.DueAmt > 0"> N/A </span> </td>
                    <td> <span *ngFor="let item1 of item.Image_files_url"> <span
                                *ngIf="item.ReportStatus === 'Completed' && (item.DueAmt === 0 || item.DueAmt < 0)"><a
                                    download="item1.ImageFile" [href]="item1.ImageFile" target="_blank">
                                    <img class="zoom" [src]="item1.ImageFile" alt="">
                                </a> <span *ngIf="item.Image_files_url.length === 0"> N/A </span> </span> </span> </td>
                </tr>
            </tbody>
        </table>
    </div>
</section>